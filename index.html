<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Editor de README en GitHub</title>
</head>
<body>
    <h1>Editor de README en GitHub</h1>
    <textarea id="fileContent" rows="20" cols="80"></textarea><br>
    <button onclick="updateFile()">Actualizar README</button>

    <script>
        const token = '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'; // Reemplaza con tu token de acceso personal
        const repoOwner = 'bluelight-dcg'; // Propietario del repositorio
        const repoName = 'TestApp'; // Nombre del repositorio
        const filePath = 'README.md'; // Ruta del archivo README.md
        const branch = 'main'; // Rama del repositorio

        // Cargar el contenido del archivo README.md
        async function loadFile() {
            try {
                const response = await fetch(`https://api.github.com/repos/${repoOwner}/${repoName}/contents/${filePath}?ref=${branch}`, {
                    headers: {
                        'Authorization': `token ${token}`,
                        'Accept': 'application/vnd.github.v3.raw'
                    }
                });
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const text = await response.text();
                document.getElementById('fileContent').value = text;
            } catch (error) {
                alert(`Error al cargar el archivo: ${error.message}`);
            }
        }

        // Actualizar el contenido del archivo README.md
        async function updateFile() {
            const content = document.getElementById('fileContent').value;
            const base64Content = btoa(content);
            try {
                const response = await fetch(`https://api.github.com/repos/${repoOwner}/${repoName}/contents/${filePath}`, {
                    method: 'PUT',
                    headers: {
                        'Authorization': `token ${token}`,
                        'Accept': 'application/vnd.github.v3+json'
                    },
                    body: JSON.stringify({
                        message: 'Actualización del README.md desde GitHub Pages',
                        content: base64Content,
                        branch: branch
                    })
                });
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const result = await response.json();
                alert('README.md actualizado: ' + result.content.sha);
            } catch (error) {
                alert(`Error al actualizar el archivo: ${error.message}`);
            }
        }

        // Cargar el contenido al cargar la página
        window.onload = loadFile;
    </script>
</body>
</html>
